<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercise 68: Memory Card Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            width: 100%;
            max-width: 1200px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 50px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Game Stats */
        .game-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            color: white;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #FFD700;
        }

        .stat-label {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Game Controls */
        .game-controls {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .controls-title {
            font-size: 1.5rem;
            color: white;
            margin-bottom: 25px;
            text-align: center;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .control-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 15px;
        }

        .control-label {
            color: white;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .difficulty-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .difficulty-btn {
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .difficulty-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .difficulty-btn.active {
            background: rgba(255, 255, 255, 0.3);
            border-color: white;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            justify-content: center;
        }

        .action-btn.primary {
            background: #4CAF50;
            color: white;
        }

        .action-btn.secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .action-btn:active {
            transform: translateY(-1px);
        }

        /* Game Board */
        .game-board {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .board-title {
            font-size: 1.8rem;
            color: white;
            margin-bottom: 30px;
            text-align: center;
        }

        .cards-grid {
            display: grid;
            gap: 20px;
            justify-content: center;
            max-width: 100%;
        }

        .card {
            width: 100px;
            height: 140px;
            perspective: 1000px;
            cursor: pointer;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card.matched .card-inner {
            transform: rotateY(180deg);
        }

        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .card-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transform: rotateY(180deg);
            color: white;
            font-size: 3rem;
        }

        .card-back {
            background: linear-gradient(135deg, #ffffff 0%, #f5f7fa 100%);
            color: #667eea;
            font-size: 2.5rem;
        }

        .card.matched .card-front {
            background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% {
                transform: rotateY(180deg) scale(1);
            }

            50% {
                transform: rotateY(180deg) scale(1.05);
            }

            100% {
                transform: rotateY(180deg) scale(1);
            }
        }

        .card.flipped {
            animation: flipCard 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes flipCard {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        /* Game Messages */
        .game-messages {
            text-align: center;
            margin-bottom: 30px;
            min-height: 60px;
        }

        .message {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 15px 30px;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: 600;
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Win Screen */
        .win-screen {
            display: none;
            text-align: center;
            color: white;
            padding: 40px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .win-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: celebrate 2s infinite;
        }

        @keyframes celebrate {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.2);
            }
        }

        .win-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #FFD700;
        }

        .win-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .win-stat {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
        }

        .win-stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
            color: #FFD700;
        }

        .win-stat-label {
            font-size: 1rem;
            opacity: 0.8;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .cards-grid {
                grid-template-columns: repeat(4, 100px);
            }
        }

        @media (max-width: 768px) {
            .game-container {
                padding: 30px;
            }

            h1 {
                font-size: 2.5rem;
            }

            .game-controls,
            .game-board {
                padding: 25px;
            }

            .cards-grid {
                grid-template-columns: repeat(3, 100px);
            }

            .card {
                width: 90px;
                height: 126px;
            }

            .controls-grid {
                grid-template-columns: 1fr;
            }

            .difficulty-buttons {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .game-container {
                padding: 20px;
            }

            h1 {
                font-size: 2rem;
            }

            .cards-grid {
                grid-template-columns: repeat(3, 80px);
                gap: 10px;
            }

            .card {
                width: 80px;
                height: 112px;
            }

            .card-front,
            .card-back {
                font-size: 2rem;
            }

            .action-buttons {
                flex-direction: column;
            }

            .game-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>

<body>
    <div class="game-container">
        <header>
            <h1>üß† Memory Card Game</h1>
            <p class="subtitle">Match pairs of cards in the fewest moves and shortest time possible</p>
        </header>

        <!-- Game Stats -->
        <div class="game-stats">
            <div class="stat-card">
                <div class="stat-value" id="movesCount">0</div>
                <div class="stat-label">Moves</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="matchesCount">0</div>
                <div class="stat-label">Matches</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="timer">00:00</div>
                <div class="stat-label">Time</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">Score</div>
            </div>
        </div>

        <!-- Game Messages -->
        <div class="game-messages" id="gameMessages">
            <div class="message" id="gameMessage">Find matching pairs!</div>
        </div>

        <!-- Game Board -->
        <div class="game-board">
            <div class="cards-grid" id="cardsGrid">
                <!-- Cards will be generated here -->
            </div>

            <!-- Win Screen -->
            <div class="win-screen" id="winScreen">
                <div class="win-icon">üèÜ</div>
                <h2 class="win-title">Congratulations!</h2>
                <p style="font-size: 1.2rem; margin-bottom: 30px; opacity: 0.9;">
                    You've matched all pairs!
                </p>

                <div class="win-stats">
                    <div class="win-stat">
                        <div class="win-stat-value" id="winMoves">0</div>
                        <div class="win-stat-label">Total Moves</div>
                    </div>
                    <div class="win-stat">
                        <div class="win-stat-value" id="winTime">00:00</div>
                        <div class="win-stat-label">Time Taken</div>
                    </div>
                    <div class="win-stat">
                        <div class="win-stat-value" id="winScore">0</div>
                        <div class="win-stat-label">Final Score</div>
                    </div>
                    <div class="win-stat">
                        <div class="win-stat-value" id="winRating">‚òÖ‚òÖ‚òÖ</div>
                        <div class="win-stat-label">Rating</div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="action-btn primary" id="playAgainBtn">
                        <span>üîÑ</span> Play Again
                    </button>
                </div>
            </div>
        </div>

        <!-- Game Controls -->
        <div class="game-controls">
            <h3 class="controls-title">Game Controls</h3>

            <div class="controls-grid">
                <div class="control-group">
                    <div class="control-label">Difficulty Level</div>
                    <div class="difficulty-buttons">
                        <button class="difficulty-btn active" data-difficulty="easy">
                            Easy (4√ó3)
                        </button>
                        <button class="difficulty-btn" data-difficulty="medium">
                            Medium (4√ó4)
                        </button>
                        <button class="difficulty-btn" data-difficulty="hard">
                            Hard (6√ó5)
                        </button>
                    </div>
                </div>

                <div class="control-group">
                    <div class="control-label">Card Theme</div>
                    <div class="difficulty-buttons">
                        <button class="difficulty-btn active" data-theme="emoji">
                            Emoji
                        </button>
                        <button class="difficulty-btn" data-theme="numbers">
                            Numbers
                        </button>
                        <button class="difficulty-btn" data-theme="symbols">
                            Symbols
                        </button>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn secondary" id="newGameBtn">
                    <span>üÜï</span> New Game
                </button>
                <button class="action-btn secondary" id="pauseBtn">
                    <span>‚è∏Ô∏è</span> Pause Game
                </button>
                <button class="action-btn primary" id="hintBtn">
                    <span>üí°</span> Get Hint
                </button>
            </div>
        </div>
    </div>

    <script>
        // Memory Game
        const memoryGame = {
            cards: [],
            flippedCards: [],
            matchedCards: [],
            moves: 0,
            matches: 0,
            score: 0,
            time: 0,
            timer: null,
            isPaused: false,
            gameActive: false,
            difficulty: 'easy',
            theme: 'emoji',

            // Initialize game
            init() {
                this.setupEventListeners();
                this.startNewGame();
            },

            // Setup event listeners
            setupEventListeners() {
                // Difficulty buttons
                document.querySelectorAll('.difficulty-btn[data-difficulty]').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.difficulty-btn[data-difficulty]').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.difficulty = btn.dataset.difficulty;
                        this.startNewGame();
                    });
                });

                // Theme buttons
                document.querySelectorAll('.difficulty-btn[data-theme]').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.difficulty-btn[data-theme]').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.theme = btn.dataset.theme;
                        this.startNewGame();
                    });
                });

                // Action buttons
                document.getElementById('newGameBtn').addEventListener('click', () => {
                    this.startNewGame();
                });

                document.getElementById('pauseBtn').addEventListener('click', () => {
                    this.togglePause();
                });

                document.getElementById('hintBtn').addEventListener('click', () => {
                    this.showHint();
                });

                document.getElementById('playAgainBtn').addEventListener('click', () => {
                    this.startNewGame();
                });
            },

            // Start new game
            startNewGame() {
                // Reset game state
                this.cards = [];
                this.flippedCards = [];
                this.matchedCards = [];
                this.moves = 0;
                this.matches = 0;
                this.score = 0;
                this.time = 0;
                this.isPaused = false;
                this.gameActive = true;

                // Clear timer
                if (this.timer) {
                    clearInterval(this.timer);
                }

                // Update UI
                this.updateStats();
                this.showMessage('Find matching pairs!');
                document.getElementById('winScreen').style.display = 'none';
                document.getElementById('cardsGrid').style.display = 'grid';

                // Create cards based on difficulty
                this.createCards();

                // Render cards
                this.renderCards();

                // Start timer
                this.startTimer();
            },

            // Create cards based on difficulty
            createCards() {
                const gridSizes = {
                    easy: { rows: 3, cols: 4 },
                    medium: { rows: 4, cols: 4 },
                    hard: { rows: 5, cols: 6 }
                };

                const size = gridSizes[this.difficulty];
                const totalPairs = (size.rows * size.cols) / 2;

                // Generate card values based on theme
                let cardValues = [];
                switch (this.theme) {
                    case 'emoji':
                        cardValues = ['üê∂', 'üê±', 'üê≠', 'üêπ', 'üê∞', 'ü¶ä', 'üêª', 'üêº', 'üê®', 'üêØ', 'ü¶Å', 'üêÆ'];
                        break;
                    case 'numbers':
                        cardValues = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'];
                        break;
                    case 'symbols':
                        cardValues = ['‚òÖ', '‚ô¶', '‚ô†', '‚ô•', '‚ô£', '‚ö°', '‚òÄ', '‚òÅ', '‚ùÑ', '‚öì', '‚òÇ', '‚ô´'];
                        break;
                }

                // Take required number of values
                cardValues = cardValues.slice(0, totalPairs);

                // Create pairs
                let cards = [];
                cardValues.forEach(value => {
                    cards.push({ id: Math.random(), value: value, flipped: false, matched: false });
                    cards.push({ id: Math.random(), value: value, flipped: false, matched: false });
                });

                // Shuffle cards
                this.cards = this.shuffleArray(cards);

                // Update grid layout
                const grid = document.getElementById('cardsGrid');
                grid.style.gridTemplateColumns = `repeat(${size.cols}, 1fr)`;
                grid.style.gridTemplateRows = `repeat(${size.rows}, 1fr)`;
            },

            // Render cards
            renderCards() {
                const grid = document.getElementById('cardsGrid');
                grid.innerHTML = '';

                this.cards.forEach((card, index) => {
                    const cardElement = document.createElement('div');
                    cardElement.className = 'card';
                    if (card.flipped || card.matched) {
                        cardElement.classList.add('flipped');
                    }
                    if (card.matched) {
                        cardElement.classList.add('matched');
                    }

                    cardElement.dataset.index = index;
                    cardElement.addEventListener('click', () => this.flipCard(index));

                    cardElement.innerHTML = `
                        <div class="card-inner">
                            <div class="card-front">
                                ${card.value}
                            </div>
                            <div class="card-back">
                                ?
                            </div>
                        </div>
                    `;

                    grid.appendChild(cardElement);
                });
            },

            // Flip card
            flipCard(index) {
                if (!this.gameActive || this.isPaused) return;
                if (this.flippedCards.length >= 2) return;

                const card = this.cards[index];
                if (card.flipped || card.matched) return;

                // Flip the card
                card.flipped = true;
                this.flippedCards.push({ index, card });

                // Update UI
                this.renderCards();

                // Check for match
                if (this.flippedCards.length === 2) {
                    this.moves++;
                    this.updateStats();

                    const [first, second] = this.flippedCards;

                    if (first.card.value === second.card.value) {
                        // Match found
                        this.matches++;
                        first.card.matched = true;
                        second.card.matched = true;

                        this.score += 100;
                        this.showMessage('Great match! üéâ');

                        this.flippedCards = [];

                        // Check win condition
                        if (this.matches === this.cards.length / 2) {
                            this.endGame();
                        }
                    } else {
                        // No match
                        this.score = Math.max(0, this.score - 10);
                        this.showMessage('Try again!');

                        // Flip cards back after delay
                        setTimeout(() => {
                            first.card.flipped = false;
                            second.card.flipped = false;
                            this.flippedCards = [];
                            this.renderCards();
                        }, 1000);
                    }
                }
            },

            // Show hint
            showHint() {
                if (!this.gameActive || this.isPaused) return;
                if (this.flippedCards.length > 0) return;

                // Find all unmatched cards
                const unmatched = this.cards
                    .map((card, index) => ({ card, index }))
                    .filter(item => !item.card.matched && !item.card.flipped);

                if (unmatched.length < 2) return;

                // Show a pair briefly
                const first = unmatched[0];
                const second = unmatched.find(item => item.card.value === first.card.value);

                if (second) {
                    first.card.flipped = true;
                    second.card.flipped = true;

                    this.renderCards();
                    this.showMessage('Hint: Remember these cards!');

                    setTimeout(() => {
                        first.card.flipped = false;
                        second.card.flipped = false;
                        this.renderCards();
                    }, 1500);
                }
            },

            // Toggle pause
            togglePause() {
                this.isPaused = !this.isPaused;
                const pauseBtn = document.getElementById('pauseBtn');

                if (this.isPaused) {
                    clearInterval(this.timer);
                    pauseBtn.innerHTML = '<span>‚ñ∂Ô∏è</span> Resume Game';
                    this.showMessage('Game Paused');
                } else {
                    this.startTimer();
                    pauseBtn.innerHTML = '<span>‚è∏Ô∏è</span> Pause Game';
                    this.showMessage('Game Resumed');
                }
            },

            // Start timer
            startTimer() {
                if (this.timer) {
                    clearInterval(this.timer);
                }

                this.timer = setInterval(() => {
                    if (!this.isPaused && this.gameActive) {
                        this.time++;
                        this.updateStats();
                    }
                }, 1000);
            },

            // End game
            endGame() {
                this.gameActive = false;
                clearInterval(this.timer);

                // Calculate final score
                const timeBonus = Math.max(0, 1000 - this.time * 5);
                const movesBonus = Math.max(0, 500 - this.moves * 10);
                this.score += timeBonus + movesBonus;

                // Calculate rating
                let rating = '‚òÖ‚òÖ‚òÖ';
                if (this.moves > (this.cards.length * 0.8)) rating = '‚òÖ‚òÖ‚òÜ';
                if (this.moves > (this.cards.length)) rating = '‚òÖ‚òÜ‚òÜ';

                // Show win screen
                document.getElementById('cardsGrid').style.display = 'none';
                document.getElementById('winScreen').style.display = 'block';

                // Update win stats
                document.getElementById('winMoves').textContent = this.moves;
                document.getElementById('winTime').textContent = this.formatTime(this.time);
                document.getElementById('winScore').textContent = this.score;
                document.getElementById('winRating').textContent = rating;

                this.showMessage('üéâ You won! üéâ');
            },

            // Update stats display
            updateStats() {
                document.getElementById('movesCount').textContent = this.moves;
                document.getElementById('matchesCount').textContent = this.matches;
                document.getElementById('timer').textContent = this.formatTime(this.time);
                document.getElementById('score').textContent = this.score;
            },

            // Show message
            showMessage(text) {
                const messageElement = document.getElementById('gameMessage');
                messageElement.textContent = text;
                messageElement.style.animation = 'none';
                setTimeout(() => {
                    messageElement.style.animation = 'fadeIn 0.3s ease';
                }, 10);
            },

            // Helper functions
            shuffleArray(array) {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            },

            formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
        };

        // Initialize the game
        document.addEventListener('DOMContentLoaded', () => {
            memoryGame.init();
        });

        // Add keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === ' ') {
                e.preventDefault();
                memoryGame.togglePause();
            }
            if (e.key === 'n' || e.key === 'N') {
                memoryGame.startNewGame();
            }
            if (e.key === 'h' || e.key === 'H') {
                memoryGame.showHint();
            }
            if (e.key === '1') {
                document.querySelector('.difficulty-btn[data-difficulty="easy"]').click();
            }
            if (e.key === '2') {
                document.querySelector('.difficulty-btn[data-difficulty="medium"]').click();
            }
            if (e.key === '3') {
                document.querySelector('.difficulty-btn[data-difficulty="hard"]').click();
            }
        });
    </script>
</body>

</html>