<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fun Addition Learning - Interactive Math Game for Kids</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Nunito:wght@400;600;700&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 25px;
            background: white;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 5px solid #FFD166;
        }

        h1 {
            font-family: 'Comic Neue', cursive;
            font-size: 3rem;
            color: #EF476F;
            margin-bottom: 10px;
            text-shadow: 3px 3px 0 #FFD166;
        }

        .subtitle {
            font-size: 1.3rem;
            color: #118AB2;
            margin-bottom: 15px;
        }

        .level-badge {
            display: inline-block;
            background: #06D6A0;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .learning-modes {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }

        .mode-tag {
            background: #118AB2;
            color: white;
            padding: 8px 15px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        /* Main Game Area */
        .game-area {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        @media (max-width: 1024px) {
            .game-area {
                grid-template-columns: 1fr;
            }
        }

        /* Control Panel */
        .control-panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            height: fit-content;
        }

        .panel-title {
            font-family: 'Comic Neue', cursive;
            font-size: 1.6rem;
            margin-bottom: 20px;
            color: #EF476F;
            border-bottom: 3px dashed #FFD166;
            padding-bottom: 10px;
        }

        .mode-selector {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 25px;
        }

        .mode-btn {
            padding: 15px;
            background: #f0f8ff;
            border: 3px solid #c2e9fb;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 600;
            color: #118AB2;
            font-size: 1.1rem;
        }

        .mode-btn:hover {
            background: #e1f5fe;
            transform: translateY(-5px);
        }

        .mode-btn.active {
            background: #FFD166;
            border-color: #EF476F;
            color: #333;
        }

        .mode-icon {
            font-size: 1.5rem;
            width: 40px;
            text-align: center;
        }

        .number-selector {
            margin-bottom: 25px;
        }

        .number-slider {
            width: 100%;
            height: 40px;
            margin-top: 10px;
            -webkit-appearance: none;
            background: linear-gradient(to right, #a1c4fd, #c2e9fb);
            border-radius: 20px;
            outline: none;
        }

        .number-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #EF476F;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(239, 71, 111, 0.5);
            border: 3px solid white;
        }

        .number-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .num-btn {
            padding: 15px;
            background: #06D6A0;
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 700;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .num-btn:hover {
            background: #05c592;
            transform: scale(1.05);
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px;
        }

        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 15px;
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .check-btn {
            background: #06D6A0;
        }

        .check-btn:hover {
            background: #05c592;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(6, 214, 160, 0.3);
        }

        .new-btn {
            background: #118AB2;
        }

        .new-btn:hover {
            background: #0f7aa1;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(17, 138, 178, 0.3);
        }

        /* Game Content */
        .game-content {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            min-height: 600px;
            display: flex;
            flex-direction: column;
        }

        .problem-display {
            background: #f9f9f9;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 3px dashed #FFD166;
        }

        .problem-text {
            font-family: 'Comic Neue', cursive;
            font-size: 2.5rem;
            text-align: center;
            color: #333;
            margin-bottom: 10px;
        }

        .problem-equation {
            font-size: 3rem;
            text-align: center;
            color: #EF476F;
            font-weight: 700;
            margin: 20px 0;
        }

        /* Addition Methods */
        .addition-method {
            display: none;
            flex: 1;
        }

        .addition-method.active {
            display: block;
        }

        /* Shapes Addition */
        .shapes-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }

        .shape-box {
            width: 150px;
            height: 150px;
            border: 4px dashed #118AB2;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            background: rgba(17, 138, 178, 0.1);
            transition: all 0.3s ease;
        }

        .shape-box.full {
            background: rgba(6, 214, 160, 0.2);
            border-style: solid;
            border-color: #06D6A0;
        }

        .shape-box.highlight {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        .shapes-pool {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 209, 102, 0.2);
            border-radius: 15px;
        }

        .draggable-shape {
            width: 70px;
            height: 70px;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            cursor: grab;
            transition: transform 0.2s;
            user-select: none;
        }

        .draggable-shape:active {
            cursor: grabbing;
            transform: scale(1.1);
        }

        .circle {
            background: #EF476F;
            color: white;
            border-radius: 50%;
        }

        .square {
            background: #118AB2;
            color: white;
        }

        .triangle {
            background: #FFD166;
            color: #333;
        }

        .star {
            background: #06D6A0;
            color: white;
        }

        .heart {
            background: #FF6B6B;
            color: white;
        }

        /* Emoji Addition */
        .emoji-container {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
        }

        .emoji-box {
            width: 180px;
            height: 180px;
            border: 4px dashed #EF476F;
            border-radius: 15px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            padding: 15px;
            gap: 10px;
            background: rgba(239, 71, 111, 0.1);
        }

        .emoji-box.full {
            background: rgba(255, 209, 102, 0.3);
            border-style: solid;
            border-color: #FFD166;
        }

        .emoji-pool {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            padding: 20px;
            background: rgba(17, 138, 178, 0.1);
            border-radius: 15px;
        }

        .draggable-emoji {
            font-size: 2.5rem;
            cursor: grab;
            transition: transform 0.2s;
            user-select: none;
        }

        .draggable-emoji:active {
            cursor: grabbing;
            transform: scale(1.2);
        }

        /* Number Line Addition */
        .numberline-container {
            margin-top: 30px;
            padding: 20px;
            background: rgba(6, 214, 160, 0.1);
            border-radius: 15px;
        }

        .numberline {
            position: relative;
            height: 100px;
            background: white;
            border-radius: 10px;
            margin: 40px 0;
            border: 3px solid #118AB2;
            overflow: visible;
        }

        .numberline-markers {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: space-between;
        }

        .marker {
            position: relative;
            width: 1px;
            height: 20px;
            background: #333;
            top: 80px;
        }

        .marker-label {
            position: absolute;
            top: 60px;
            left: -10px;
            width: 20px;
            text-align: center;
            font-weight: 700;
            color: #118AB2;
        }

        .numberline-pointer {
            position: absolute;
            top: -30px;
            width: 40px;
            height: 40px;
            background: #EF476F;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: left 0.5s ease;
            user-select: none;
            z-index: 10;
        }

        .numberline-jump {
            position: absolute;
            height: 5px;
            background: #FFD166;
            top: 50%;
            transform: translateY(-50%);
            border-radius: 5px;
            transition: width 0.5s ease, left 0.5s ease;
        }

        .numberline-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .jump-btn {
            padding: 12px 25px;
            background: #118AB2;
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .jump-btn:hover {
            background: #0f7aa1;
            transform: translateY(-3px);
        }

        /* Place Value Addition */
        .place-value-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
        }

        .place-value-column {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .place-value-box {
            width: 120px;
            height: 150px;
            border: 3px dashed #06D6A0;
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            padding: 10px;
            gap: 5px;
            background: rgba(6, 214, 160, 0.1);
        }

        .place-value-box.full {
            background: rgba(255, 209, 102, 0.3);
            border-style: solid;
            border-color: #FFD166;
        }

        .place-value-label {
            font-weight: 700;
            color: #118AB2;
            font-size: 1.2rem;
            margin-top: 10px;
        }

        .place-value-unit {
            width: 40px;
            height: 40px;
            background: #EF476F;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: 700;
            cursor: grab;
            user-select: none;
            transition: transform 0.2s;
        }

        .place-value-unit.ten {
            width: 80px;
            height: 40px;
            background: #118AB2;
        }

        .place-value-unit.hundred {
            width: 80px;
            height: 80px;
            background: #FFD166;
            color: #333;
        }

        .place-value-unit:active {
            cursor: grabbing;
            transform: scale(1.1);
        }

        .place-value-pool {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            padding: 20px;
            background: rgba(239, 71, 111, 0.1);
            border-radius: 15px;
        }

        /* Answer Section */
        .answer-section {
            margin-top: 30px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 15px;
            border: 3px solid #c2e9fb;
        }

        .answer-input {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 15px;
        }

        .answer-box {
            width: 100px;
            height: 100px;
            border: 4px solid #118AB2;
            border-radius: 15px;
            font-size: 3.5rem;
            text-align: center;
            font-weight: 700;
            color: #EF476F;
            background: white;
        }

        .equals-sign {
            font-size: 3rem;
            color: #333;
            font-weight: 700;
        }

        /* Feedback */
        .feedback {
            text-align: center;
            margin-top: 20px;
            font-size: 1.5rem;
            font-weight: 700;
            min-height: 40px;
        }

        .feedback.correct {
            color: #06D6A0;
        }

        .feedback.incorrect {
            color: #EF476F;
        }

        /* Progress */
        .progress-section {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin-top: 25px;
        }

        .progress-title {
            font-family: 'Comic Neue', cursive;
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #118AB2;
        }

        .progress-bar {
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #06D6A0, #118AB2);
            width: 0%;
            transition: width 0.5s ease;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            color: #666;
            font-weight: 600;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 25px;
            margin-top: 30px;
            color: #666;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }

            .game-area {
                grid-template-columns: 1fr;
            }

            .problem-equation {
                font-size: 2.2rem;
            }

            .emoji-container,
            .place-value-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-plus-circle"></i> Fun Addition Learning</h1>
            <div class="level-badge">Beginner Level - Perfect for Starting Math</div>
            <p class="subtitle">Learn addition by dragging shapes, emojis, using number lines, and place value blocks!
            </p>
            <div class="learning-modes">
                <div class="mode-tag"><i class="fas fa-shapes"></i> Shape Counting</div>
                <div class="mode-tag"><i class="far fa-smile"></i> Emoji Addition</div>
                <div class="mode-tag"><i class="fas fa-ruler"></i> Number Line</div>
                <div class="mode-tag"><i class="fas fa-cubes"></i> Place Value</div>
            </div>
        </header>

        <div class="game-area">
            <!-- Control Panel -->
            <div class="control-panel">
                <h2 class="panel-title"><i class="fas fa-gamepad"></i> Game Controls</h2>

                <div class="mode-selector">
                    <div class="mode-btn active" data-mode="shapes">
                        <div class="mode-icon"><i class="fas fa-shapes"></i></div>
                        <div>Shape Counting</div>
                    </div>
                    <div class="mode-btn" data-mode="emojis">
                        <div class="mode-icon"><i class="far fa-smile"></i></div>
                        <div>Emoji Addition</div>
                    </div>
                    <div class="mode-btn" data-mode="numberline">
                        <div class="mode-icon"><i class="fas fa-ruler"></i></div>
                        <div>Number Line</div>
                    </div>
                    <div class="mode-btn" data-mode="placevalue">
                        <div class="mode-icon"><i class="fas fa-cubes"></i></div>
                        <div>Place Value Blocks</div>
                    </div>
                </div>

                <div class="number-selector">
                    <h3><i class="fas fa-sliders-h"></i> Choose Numbers to Add</h3>
                    <div class="number-buttons">
                        <button class="num-btn" data-num="1">1</button>
                        <button class="num-btn" data-num="2">2</button>
                        <button class="num-btn" data-num="3">3</button>
                        <button class="num-btn" data-num="4">4</button>
                        <button class="num-btn" data-num="5">5</button>
                        <button class="num-btn" data-num="6">6</button>
                        <button class="num-btn" data-num="7">7</button>
                        <button class="num-btn" data-num="8">8</button>
                        <button class="num-btn" data-num="9">9</button>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="action-btn check-btn" id="checkAnswer">
                        <i class="fas fa-check-circle"></i> Check My Answer
                    </button>
                    <button class="action-btn new-btn" id="newProblem">
                        <i class="fas fa-redo"></i> New Addition Problem
                    </button>
                </div>

                <div style="margin-top: 30px; font-size: 0.9rem; color: #666; text-align: center;">
                    <p><i class="fas fa-lightbulb"></i> <strong>Tip:</strong> Drag items into the boxes to solve the
                        addition!</p>
                </div>
            </div>

            <!-- Game Content -->
            <div class="game-content">
                <div class="problem-display">
                    <div class="problem-text">Solve this addition problem:</div>
                    <div class="problem-equation" id="problemEquation">3 + 2 = ?</div>
                    <div class="problem-text" id="problemDescription">Drag shapes into the boxes to show 3 + 2</div>
                </div>

                <!-- Shapes Addition Method -->
                <div class="addition-method active" id="shapes-method">
                    <div class="shapes-container">
                        <div class="shape-box" id="shapeBox1">
                            <span id="shapeCount1">0</span>
                        </div>
                        <div class="plus-sign" style="font-size: 3rem; align-self: center;">+</div>
                        <div class="shape-box" id="shapeBox2">
                            <span id="shapeCount2">0</span>
                        </div>
                    </div>

                    <div class="shapes-pool" id="shapesPool">
                        <!-- Shapes will be added here dynamically -->
                    </div>
                </div>

                <!-- Emoji Addition Method -->
                <div class="addition-method" id="emojis-method">
                    <div class="emoji-container">
                        <div class="emoji-box" id="emojiBox1"></div>
                        <div class="plus-sign" style="font-size: 3rem; align-self: center;">+</div>
                        <div class="emoji-box" id="emojiBox2"></div>
                    </div>

                    <div class="emoji-pool" id="emojiPool">
                        <!-- Emojis will be added here dynamically -->
                    </div>
                </div>

                <!-- Number Line Addition Method -->
                <div class="addition-method" id="numberline-method">
                    <div class="numberline-container">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <p style="font-size: 1.2rem; color: #118AB2;">Use the pointer to jump along the number line
                                to solve the addition</p>
                        </div>

                        <div class="numberline" id="numberline">
                            <div class="numberline-markers" id="numberlineMarkers">
                                <!-- Markers will be added here dynamically -->
                            </div>
                            <div class="numberline-pointer" id="numberlinePointer" style="left: 0px;">0</div>
                            <div class="numberline-jump" id="firstJump" style="display: none;"></div>
                            <div class="numberline-jump" id="secondJump" style="display: none;"></div>
                        </div>

                        <div class="numberline-controls">
                            <button class="jump-btn" id="jumpFirst">Jump <span id="firstNum">3</span></button>
                            <button class="jump-btn" id="jumpSecond">Jump <span id="secondNum">2</span></button>
                            <button class="jump-btn" id="resetPointer">Reset to 0</button>
                        </div>
                    </div>
                </div>

                <!-- Place Value Addition Method -->
                <div class="addition-method" id="placevalue-method">
                    <div class="place-value-container">
                        <div class="place-value-column">
                            <div class="place-value-box" id="placeValueBox1">
                                <!-- Units will be added here dynamically -->
                            </div>
                            <div class="place-value-label">First Number</div>
                        </div>
                        <div class="plus-sign" style="font-size: 3rem; align-self: center;">+</div>
                        <div class="place-value-column">
                            <div class="place-value-box" id="placeValueBox2">
                                <!-- Units will be added here dynamically -->
                            </div>
                            <div class="place-value-label">Second Number</div>
                        </div>
                    </div>

                    <div class="place-value-pool" id="placeValuePool">
                        <!-- Place value units will be added here dynamically -->
                    </div>
                </div>

                <!-- Answer Section -->
                <div class="answer-section">
                    <div style="text-align: center; font-weight: 700; color: #118AB2; font-size: 1.3rem;">
                        <i class="fas fa-key"></i> Enter Your Answer
                    </div>
                    <div class="answer-input">
                        <div class="problem-equation" id="answerEquation">3 + 2 =</div>
                        <input type="number" class="answer-box" id="answerInput" min="0" max="99" value="">
                    </div>
                    <div class="feedback" id="feedback"></div>
                </div>
            </div>
        </div>

        <!-- Progress Section -->
        <div class="progress-section">
            <h3 class="progress-title"><i class="fas fa-chart-line"></i> Your Progress</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 20%;"></div>
            </div>
            <div class="stats">
                <div><i class="fas fa-check-circle" style="color: #06D6A0;"></i> Correct: <span
                        id="correctCount">2</span></div>
                <div><i class="fas fa-times-circle" style="color: #EF476F;"></i> Attempts: <span
                        id="attemptCount">5</span></div>
                <div><i class="fas fa-star" style="color: #FFD166;"></i> Score: <span id="scoreCount">40%</span></div>
            </div>
        </div>

        <footer>
            <p>Interactive Addition Learning Game ‚Ä¢ Designed for Kids Starting Math ‚Ä¢ Drag & Drop to Learn</p>
            <p style="margin-top: 10px;">Practice addition with shapes, emojis, number lines, and place value blocks!
            </p>
        </footer>
    </div>

    <script>
        // Game state
        let gameState = {
            mode: 'shapes',
            num1: 3,
            num2: 2,
            correctAnswer: 5,
            userAnswer: null,
            correctCount: 2,
            attemptCount: 5,
            shapesInBox1: 0,
            shapesInBox2: 0,
            emojisInBox1: 0,
            emojisInBox2: 0,
            placeValueUnits1: 0,
            placeValueUnits2: 0,
            numberLinePosition: 0
        };

        // DOM elements
        const modeButtons = document.querySelectorAll('.mode-btn');
        const numButtons = document.querySelectorAll('.num-btn');
        const checkAnswerBtn = document.getElementById('checkAnswer');
        const newProblemBtn = document.getElementById('newProblem');
        const problemEquation = document.getElementById('problemEquation');
        const problemDescription = document.getElementById('problemDescription');
        const answerInput = document.getElementById('answerInput');
        const feedback = document.getElementById('feedback');
        const answerEquation = document.getElementById('answerEquation');

        // Progress elements
        const progressFill = document.getElementById('progressFill');
        const correctCount = document.getElementById('correctCount');
        const attemptCount = document.getElementById('attemptCount');
        const scoreCount = document.getElementById('scoreCount');

        // Initialize the game
        document.addEventListener('DOMContentLoaded', function () {
            // Set up event listeners
            setupEventListeners();

            // Initialize the current mode
            initializeMode(gameState.mode);

            // Update progress display
            updateProgress();
        });

        // Set up event listeners
        function setupEventListeners() {
            // Mode selection buttons
            modeButtons.forEach(button => {
                button.addEventListener('click', function () {
                    // Remove active class from all buttons
                    modeButtons.forEach(btn => btn.classList.remove('active'));

                    // Add active class to clicked button
                    this.classList.add('active');

                    // Get the mode
                    const mode = this.getAttribute('data-mode');

                    // Switch to the new mode
                    switchMode(mode);
                });
            });

            // Number selection buttons
            numButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const num = parseInt(this.getAttribute('data-num'));

                    // Update the numbers (alternate between num1 and num2)
                    if (gameState.num1 === gameState.num2) {
                        gameState.num1 = num;
                    } else {
                        gameState.num2 = num;
                    }

                    // Update the problem
                    updateProblem();

                    // Reinitialize the current mode with new numbers
                    initializeMode(gameState.mode);
                });
            });

            // Check answer button
            checkAnswerBtn.addEventListener('click', checkAnswer);

            // New problem button
            newProblemBtn.addEventListener('click', generateNewProblem);

            // Answer input - check when user presses Enter
            answerInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    checkAnswer();
                }
            });
        }

        // Switch between addition methods
        function switchMode(mode) {
            // Hide all method containers
            document.querySelectorAll('.addition-method').forEach(container => {
                container.classList.remove('active');
            });

            // Show the selected method container
            document.getElementById(`${mode}-method`).classList.add('active');

            // Update game state
            gameState.mode = mode;

            // Initialize the mode
            initializeMode(mode);

            // Update problem description
            updateProblemDescription();
        }

        // Initialize the current mode
        function initializeMode(mode) {
            // Reset counts for the current mode
            gameState.shapesInBox1 = 0;
            gameState.shapesInBox2 = 0;
            gameState.emojisInBox1 = 0;
            gameState.emojisInBox2 = 0;
            gameState.placeValueUnits1 = 0;
            gameState.placeValueUnits2 = 0;
            gameState.numberLinePosition = 0;

            // Clear feedback
            feedback.textContent = '';
            feedback.className = 'feedback';

            // Clear answer input
            answerInput.value = '';

            // Initialize the specific mode
            switch (mode) {
                case 'shapes':
                    initializeShapesMode();
                    break;
                case 'emojis':
                    initializeEmojisMode();
                    break;
                case 'numberline':
                    initializeNumberLineMode();
                    break;
                case 'placevalue':
                    initializePlaceValueMode();
                    break;
            }

            // Update the problem equation
            updateProblem();
        }

        // Initialize shapes mode
        function initializeShapesMode() {
            const shapesPool = document.getElementById('shapesPool');
            const shapeBox1 = document.getElementById('shapeBox1');
            const shapeBox2 = document.getElementById('shapeBox2');

            // Clear the pool and boxes
            shapesPool.innerHTML = '';
            shapeBox1.innerHTML = '<span id="shapeCount1">0</span>';
            shapeBox2.innerHTML = '<span id="shapeCount2">0</span>';
            shapeBox1.className = 'shape-box';
            shapeBox2.className = 'shape-box';

            // Create shapes for the pool
            const shapeTypes = ['circle', 'square', 'triangle', 'star', 'heart'];
            const shapeIcons = {
                'circle': '‚óè',
                'square': '‚ñ†',
                'triangle': '‚ñ≤',
                'star': '‚òÖ',
                'heart': '‚ù§'
            };

            // Create enough shapes for both numbers plus extras
            const totalShapes = gameState.num1 + gameState.num2 + 5;

            for (let i = 0; i < totalShapes; i++) {
                const shapeType = shapeTypes[Math.floor(Math.random() * shapeTypes.length)];
                const shape = document.createElement('div');
                shape.className = `draggable-shape ${shapeType}`;
                shape.textContent = shapeIcons[shapeType];
                shape.setAttribute('draggable', 'true');

                // Add drag event listeners
                shape.addEventListener('dragstart', handleDragStart);

                shapesPool.appendChild(shape);
            }

            // Make boxes drop targets
            shapeBox1.addEventListener('dragover', handleDragOver);
            shapeBox1.addEventListener('drop', function (e) {
                handleDrop(e, 'shapeBox1');
            });

            shapeBox2.addEventListener('dragover', handleDragOver);
            shapeBox2.addEventListener('drop', function (e) {
                handleDrop(e, 'shapeBox2');
            });
        }

        // Initialize emojis mode
        function initializeEmojisMode() {
            const emojiPool = document.getElementById('emojiPool');
            const emojiBox1 = document.getElementById('emojiBox1');
            const emojiBox2 = document.getElementById('emojiBox2');

            // Clear the pool and boxes
            emojiPool.innerHTML = '';
            emojiBox1.innerHTML = '';
            emojiBox2.innerHTML = '';
            emojiBox1.className = 'emoji-box';
            emojiBox2.className = 'emoji-box';

            // Create emojis for the pool
            const emojis = ['üòÄ', 'üê∂', 'üê±', 'üêº', 'üêØ', 'ü¶Å', 'üêÆ', 'üê∑', 'üê∏', 'üêµ',
                'üêî', 'üêß', 'üê¶', 'üê§', 'ü¶Ü', 'ü¶â', 'ü¶á', 'üê∫', 'üêó', 'üê¥',
                'ü¶Ñ', 'üêù', 'üêõ', 'ü¶ã', 'üêå', 'üêû', 'üêú', 'ü¶ü', 'ü¶ó', 'üï∑'];

            // Create enough emojis for both numbers plus extras
            const totalEmojis = gameState.num1 + gameState.num2 + 8;

            for (let i = 0; i < totalEmojis; i++) {
                const emoji = emojis[Math.floor(Math.random() * emojis.length)];
                const emojiElement = document.createElement('div');
                emojiElement.className = 'draggable-emoji';
                emojiElement.textContent = emoji;
                emojiElement.setAttribute('draggable', 'true');

                // Add drag event listeners
                emojiElement.addEventListener('dragstart', handleDragStart);

                emojiPool.appendChild(emojiElement);
            }

            // Make boxes drop targets
            emojiBox1.addEventListener('dragover', handleDragOver);
            emojiBox1.addEventListener('drop', function (e) {
                handleDrop(e, 'emojiBox1');
            });

            emojiBox2.addEventListener('dragover', handleDragOver);
            emojiBox2.addEventListener('drop', function (e) {
                handleDrop(e, 'emojiBox2');
            });
        }

        // Initialize number line mode
        function initializeNumberLineMode() {
            const numberline = document.getElementById('numberline');
            const numberlineMarkers = document.getElementById('numberlineMarkers');
            const numberlinePointer = document.getElementById('numberlinePointer');
            const firstJump = document.getElementById('firstJump');
            const secondJump = document.getElementById('secondJump');
            const jumpFirstBtn = document.getElementById('jumpFirst');
            const jumpSecondBtn = document.getElementById('jumpSecond');
            const resetPointerBtn = document.getElementById('resetPointer');

            // Clear the number line
            numberlineMarkers.innerHTML = '';
            numberlinePointer.style.left = '0px';
            numberlinePointer.textContent = '0';
            firstJump.style.display = 'none';
            secondJump.style.display = 'none';

            // Set up numbers for buttons
            document.getElementById('firstNum').textContent = gameState.num1;
            document.getElementById('secondNum').textContent = gameState.num2;

            // Calculate maximum number to show on number line
            const maxNumber = gameState.num1 + gameState.num2 + 2;
            const numberlineWidth = numberline.offsetWidth;
            const markerSpacing = numberlineWidth / maxNumber;

            // Create markers
            for (let i = 0; i <= maxNumber; i++) {
                const marker = document.createElement('div');
                marker.className = 'marker';
                marker.style.left = `${i * markerSpacing}px`;

                const label = document.createElement('div');
                label.className = 'marker-label';
                label.textContent = i;

                marker.appendChild(label);
                numberlineMarkers.appendChild(marker);
            }

            // Set up pointer drag
            numberlinePointer.addEventListener('mousedown', startPointerDrag);
            numberlinePointer.addEventListener('touchstart', startPointerDragTouch);

            // Set up jump buttons
            jumpFirstBtn.onclick = function () {
                jumpOnNumberLine(gameState.num1, 'firstJump');
            };

            jumpSecondBtn.onclick = function () {
                jumpOnNumberLine(gameState.num2, 'secondJump');
            };

            // Set up reset button
            resetPointerBtn.onclick = function () {
                gameState.numberLinePosition = 0;
                numberlinePointer.style.left = '0px';
                numberlinePointer.textContent = '0';
                firstJump.style.display = 'none';
                secondJump.style.display = 'none';
            };
        }

        // Initialize place value mode
        function initializePlaceValueMode() {
            const placeValuePool = document.getElementById('placeValuePool');
            const placeValueBox1 = document.getElementById('placeValueBox1');
            const placeValueBox2 = document.getElementById('placeValueBox2');

            // Clear the pool and boxes
            placeValuePool.innerHTML = '';
            placeValueBox1.innerHTML = '';
            placeValueBox2.innerHTML = '';
            placeValueBox1.className = 'place-value-box';
            placeValueBox2.className = 'place-value-box';

            // Create place value units (ones, tens, hundreds)
            // For beginner addition, we'll only use ones (units)
            const totalUnits = gameState.num1 + gameState.num2 + 10;

            for (let i = 0; i < totalUnits; i++) {
                const unit = document.createElement('div');
                unit.className = 'place-value-unit';
                unit.textContent = '1';
                unit.setAttribute('draggable', 'true');
                unit.setAttribute('data-value', '1');

                // Add drag event listeners
                unit.addEventListener('dragstart', handleDragStart);

                placeValuePool.appendChild(unit);
            }

            // Make boxes drop targets
            placeValueBox1.addEventListener('dragover', handleDragOver);
            placeValueBox1.addEventListener('drop', function (e) {
                handleDrop(e, 'placeValueBox1');
            });

            placeValueBox2.addEventListener('dragover', handleDragOver);
            placeValueBox2.addEventListener('drop', function (e) {
                handleDrop(e, 'placeValueBox2');
            });
        }

        // Update the problem equation and description
        function updateProblem() {
            gameState.correctAnswer = gameState.num1 + gameState.num2;
            problemEquation.textContent = `${gameState.num1} + ${gameState.num2} = ?`;
            answerEquation.textContent = `${gameState.num1} + ${gameState.num2} =`;
            updateProblemDescription();
        }

        // Update problem description based on current mode
        function updateProblemDescription() {
            const descriptions = {
                'shapes': `Drag ${gameState.num1} shape(s) into the first box and ${gameState.num2} shape(s) into the second box`,
                'emojis': `Drag ${gameState.num1} emoji(s) into the first box and ${gameState.num2} emoji(s) into the second box`,
                'numberline': `Use the number line to add ${gameState.num1} and ${gameState.num2}`,
                'placevalue': `Use place value blocks to show ${gameState.num1} + ${gameState.num2}`
            };

            problemDescription.textContent = descriptions[gameState.mode] || 'Solve this addition problem';
        }

        // Generate a new random problem
        function generateNewProblem() {
            // Generate random numbers between 1 and 9
            gameState.num1 = Math.floor(Math.random() * 9) + 1;
            gameState.num2 = Math.floor(Math.random() * 9) + 1;

            // Update the problem
            updateProblem();

            // Reinitialize the current mode with new numbers
            initializeMode(gameState.mode);

            // Clear feedback
            feedback.textContent = '';
            feedback.className = 'feedback';

            // Clear answer input
            answerInput.value = '';
        }

        // Check the user's answer
        function checkAnswer() {
            // Get user's answer
            const userAnswer = parseInt(answerInput.value);

            // Check if answer is provided
            if (isNaN(userAnswer)) {
                feedback.textContent = 'Please enter an answer first!';
                feedback.className = 'feedback incorrect';
                return;
            }

            // Update game state
            gameState.userAnswer = userAnswer;
            gameState.attemptCount++;

            // Check if answer is correct
            if (userAnswer === gameState.correctAnswer) {
                feedback.textContent = `Correct! ${gameState.num1} + ${gameState.num2} = ${gameState.correctAnswer}`;
                feedback.className = 'feedback correct';
                gameState.correctCount++;

                // Highlight the boxes
                highlightBoxes();

                // Auto-generate new problem after 2 seconds
                setTimeout(generateNewProblem, 2000);
            } else {
                feedback.textContent = `Try again! ${gameState.num1} + ${gameState.num2} is not ${userAnswer}`;
                feedback.className = 'feedback incorrect';
            }

            // Update progress
            updateProgress();
        }

        // Highlight the boxes when answer is correct
        function highlightBoxes() {
            let boxes = [];

            switch (gameState.mode) {
                case 'shapes':
                    boxes = [document.getElementById('shapeBox1'), document.getElementById('shapeBox2')];
                    break;
                case 'emojis':
                    boxes = [document.getElementById('emojiBox1'), document.getElementById('emojiBox2')];
                    break;
                case 'placevalue':
                    boxes = [document.getElementById('placeValueBox1'), document.getElementById('placeValueBox2')];
                    break;
            }

            boxes.forEach(box => {
                if (box) {
                    box.classList.add('highlight');
                    setTimeout(() => {
                        box.classList.remove('highlight');
                    }, 2000);
                }
            });
        }

        // Update progress display
        function updateProgress() {
            // Update counts
            correctCount.textContent = gameState.correctCount;
            attemptCount.textContent = gameState.attemptCount;

            // Calculate score
            const score = gameState.attemptCount > 0 ?
                Math.round((gameState.correctCount / gameState.attemptCount) * 100) : 0;
            scoreCount.textContent = `${score}%`;

            // Update progress bar
            const progressPercent = Math.min(score, 100);
            progressFill.style.width = `${progressPercent}%`;
        }

        // Drag and Drop Functions
        let draggedElement = null;

        function handleDragStart(e) {
            draggedElement = this;
            e.dataTransfer.setData('text/plain', this.textContent);
            this.style.opacity = '0.5';
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDrop(e, boxId) {
            e.preventDefault();

            if (!draggedElement) return;

            // Get the box element
            const box = document.getElementById(boxId);

            // Check if we can add more items to this box
            let currentCount = 0;
            let maxCount = 0;

            if (boxId === 'shapeBox1' || boxId === 'emojiBox1' || boxId === 'placeValueBox1') {
                maxCount = gameState.num1;

                if (boxId === 'shapeBox1') {
                    currentCount = gameState.shapesInBox1;
                } else if (boxId === 'emojiBox1') {
                    currentCount = gameState.emojisInBox1;
                } else if (boxId === 'placeValueBox1') {
                    currentCount = gameState.placeValueUnits1;
                }
            } else if (boxId === 'shapeBox2' || boxId === 'emojiBox2' || boxId === 'placeValueBox2') {
                maxCount = gameState.num2;

                if (boxId === 'shapeBox2') {
                    currentCount = gameState.shapesInBox2;
                } else if (boxId === 'emojiBox2') {
                    currentCount = gameState.emojisInBox2;
                } else if (boxId === 'placeValueBox2') {
                    currentCount = gameState.placeValueUnits2;
                }
            }

            // If box is already full, don't add more
            if (currentCount >= maxCount) {
                feedback.textContent = `This box is already full! It should have ${maxCount} items.`;
                feedback.className = 'feedback incorrect';
                draggedElement.style.opacity = '1';
                draggedElement = null;
                return;
            }

            // Clone the dragged element
            const clonedElement = draggedElement.cloneNode(true);
            clonedElement.style.opacity = '1';
            clonedElement.removeAttribute('draggable');
            clonedElement.style.cursor = 'default';

            // Remove drag event listeners from the clone
            const newElement = clonedElement.cloneNode(true);

            // Add to the box
            box.appendChild(newElement);

            // Update counts
            if (boxId === 'shapeBox1') {
                gameState.shapesInBox1++;
                document.getElementById('shapeCount1').textContent = gameState.shapesInBox1;

                // Check if box is now full
                if (gameState.shapesInBox1 === gameState.num1) {
                    box.classList.add('full');
                }
            } else if (boxId === 'shapeBox2') {
                gameState.shapesInBox2++;
                document.getElementById('shapeCount2').textContent = gameState.shapesInBox2;

                // Check if box is now full
                if (gameState.shapesInBox2 === gameState.num2) {
                    box.classList.add('full');
                }
            } else if (boxId === 'emojiBox1') {
                gameState.emojisInBox1++;

                // Check if box is now full
                if (gameState.emojisInBox1 === gameState.num1) {
                    box.classList.add('full');
                }
            } else if (boxId === 'emojiBox2') {
                gameState.emojisInBox2++;

                // Check if box is now full
                if (gameState.emojisInBox2 === gameState.num2) {
                    box.classList.add('full');
                }
            } else if (boxId === 'placeValueBox1') {
                gameState.placeValueUnits1++;

                // Check if box is now full
                if (gameState.placeValueUnits1 === gameState.num1) {
                    box.classList.add('full');
                }
            } else if (boxId === 'placeValueBox2') {
                gameState.placeValueUnits2++;

                // Check if box is now full
                if (gameState.placeValueUnits2 === gameState.num2) {
                    box.classList.add('full');
                }
            }

            // Remove the original element from the pool
            draggedElement.parentNode.removeChild(draggedElement);

            // Reset dragged element
            draggedElement.style.opacity = '1';
            draggedElement = null;

            // Update answer input if both boxes are full
            updateAnswerFromBoxes();
        }

        // Update answer input based on items in boxes
        function updateAnswerFromBoxes() {
            let total = 0;

            switch (gameState.mode) {
                case 'shapes':
                    total = gameState.shapesInBox1 + gameState.shapesInBox2;
                    break;
                case 'emojis':
                    total = gameState.emojisInBox1 + gameState.emojisInBox2;
                    break;
                case 'placevalue':
                    total = gameState.placeValueUnits1 + gameState.placeValueUnits2;
                    break;
            }

            // Only update if we have items in boxes
            if (total > 0) {
                answerInput.value = total;
            }
        }

        // Number Line Functions
        function startPointerDrag(e) {
            e.preventDefault();

            const pointer = document.getElementById('numberlinePointer');
            const numberline = document.getElementById('numberline');
            const numberlineRect = numberline.getBoundingClientRect();

            let initialX = e.clientX - numberlineRect.left;
            let pointerLeft = parseInt(pointer.style.left) || 0;

            function onMouseMove(e) {
                const newX = e.clientX - numberlineRect.left;
                const deltaX = newX - initialX;
                let newLeft = pointerLeft + deltaX;

                // Constrain to number line bounds
                newLeft = Math.max(0, Math.min(newLeft, numberlineRect.width - 40));

                // Update pointer position
                pointer.style.left = `${newLeft}px`;

                // Calculate current number
                const maxNumber = gameState.num1 + gameState.num2 + 2;
                const currentNumber = Math.round((newLeft / (numberlineRect.width - 40)) * maxNumber);
                pointer.textContent = currentNumber;

                // Update game state
                gameState.numberLinePosition = currentNumber;

                // Update answer input
                answerInput.value = currentNumber;
            }

            function onMouseUp() {
                document.removeEventListener('mousemove', onMouseMove);
                document.removeEventListener('mouseup', onMouseUp);
            }

            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);
        }

        function startPointerDragTouch(e) {
            e.preventDefault();

            const pointer = document.getElementById('numberlinePointer');
            const numberline = document.getElementById('numberline');
            const numberlineRect = numberline.getBoundingClientRect();
            const touch = e.touches[0];

            let initialX = touch.clientX - numberlineRect.left;
            let pointerLeft = parseInt(pointer.style.left) || 0;

            function onTouchMove(e) {
                const touch = e.touches[0];
                const newX = touch.clientX - numberlineRect.left;
                const deltaX = newX - initialX;
                let newLeft = pointerLeft + deltaX;

                // Constrain to number line bounds
                newLeft = Math.max(0, Math.min(newLeft, numberlineRect.width - 40));

                // Update pointer position
                pointer.style.left = `${newLeft}px`;

                // Calculate current number
                const maxNumber = gameState.num1 + gameState.num2 + 2;
                const currentNumber = Math.round((newLeft / (numberlineRect.width - 40)) * maxNumber);
                pointer.textContent = currentNumber;

                // Update game state
                gameState.numberLinePosition = currentNumber;

                // Update answer input
                answerInput.value = currentNumber;
            }

            function onTouchEnd() {
                document.removeEventListener('touchmove', onTouchMove);
                document.removeEventListener('touchend', onTouchEnd);
            }

            document.addEventListener('touchmove', onTouchMove);
            document.addEventListener('touchend', onTouchEnd);
        }

        function jumpOnNumberLine(jumpAmount, jumpElementId) {
            const pointer = document.getElementById('numberlinePointer');
            const numberline = document.getElementById('numberline');
            const numberlineRect = numberline.getBoundingClientRect();
            const jumpElement = document.getElementById(jumpElementId);

            const currentLeft = parseInt(pointer.style.left) || 0;
            const maxNumber = gameState.num1 + gameState.num2 + 2;
            const spacing = (numberlineRect.width - 40) / maxNumber;

            const newLeft = currentLeft + (jumpAmount * spacing);

            // Constrain to number line bounds
            const constrainedLeft = Math.max(0, Math.min(newLeft, numberlineRect.width - 40));

            // Animate the jump
            pointer.style.transition = 'left 0.5s ease';
            pointer.style.left = `${constrainedLeft}px`;

            // Show jump visualization
            jumpElement.style.left = `${currentLeft + 20}px`;
            jumpElement.style.width = `${jumpAmount * spacing}px`;
            jumpElement.style.display = 'block';

            // Update pointer number after animation
            setTimeout(() => {
                const currentNumber = Math.round((constrainedLeft / (numberlineRect.width - 40)) * maxNumber);
                pointer.textContent = currentNumber;

                // Update game state
                gameState.numberLinePosition = currentNumber;

                // Update answer input
                answerInput.value = currentNumber;

                // Remove transition for future drags
                pointer.style.transition = '';
            }, 500);
        }

        // Add some initial shapes to the pool when page loads
        window.addEventListener('load', function () {
            // Initialize with some random numbers for demonstration
            gameState.num1 = 3;
            gameState.num2 = 2;
            updateProblem();
        });
    </script>
</body>

</html>